

npc:
  params:
    # how accurate the line checking facing npc is
    facing_res: 10
    # how lenient to be with the line
    leniency: 1
  npcs:
    billy:
      name: Billy
      colour: 0xff00ff
      position: -3 64 18
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNDE1NWQyMWM3NzNjNzY1MmJlOTg0YmQ3NTNkZDhiM2QyMjVkOWE5NTBkMWQyM2ViZjBmYzVjOWVkYzM4NDBjYiJ9fX0=
      villager:
        type: jungle
        profession: fletcher
      dialogue:
        - messages:
          - Once upon a time, I stumbled across a hole.
          - Honestly, I have no idea how I didn't fall in.
    sam:
      name: Sam
      colour: 0xffff00
      position: 3 64 18
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODBiYzk0YTIzOThlOTliNDRkMjUyMDg4Y2EyMzU2M2Y3OTlhZTUzZDdlZWVlOTRmNzFlM2NiODVkMjViOTc4MiJ9fX0=
      villager:
        type: swamp
        profession: shepherd
      dialogue:
        - messages:
          - Well, this is a bit unfortunate.
          - Please leave.
          end: 1
    marc:
      name: Marc
      colour: 0x00ff00
      position: 0 64 18
      rotation: 180 0
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYmExYjA2Njk3NDIwMmViMGY2ZTM0MmFhYmI3ZTBkNzM0ZGNhMDlhOWY2ZjJiMzhmMjIyNmE3OTEwZmIzNzZlOSJ9fX0
      villager:
        type: taiga
        profession: mason
      dialogue:
        - messages:
          - I have nothing to say to you.
          - message:
              - text: "GOODBYE, "
                color: red
                bold: true
              - selector: select.player
                color: dark_red
                bold: true
                italic: true
            global: true
          end: 1
        - messages:
          - Please stop.
          - I will call the police.
          cond: 1
          end: 0
    wheatish:
      name: Mr. Wheat
      colour: 0xc7a946
      position: 6 64 18
      rotation: 180 0
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYzBkNDE1ZDJlYjlkNjhlNTZkYjUwYWZmNDk0YWJkZWRiODViOTExOTE4OWNmMDFkZDRmOTFjNmRhYjJjNmJhIn19fQ==
      villager:
        type: desert
        profession: none
      dialogue:
        - messages:
          - Hey! It sure is a LOAF-ly day today, isn't it?
          - A fine day for some bread... though isn't that every day?
          - Anyways, you should get on with your daily whole wheat goodness!
          - message: 
              - text: "I've heard the bread at safeway is mighty tasty, "
              - text: go try some
                color: light_purple
                italic: true
              - text: '!'
            command:
              - type: quest
                value: bread
            global: true
          end: 1
        - messages:
          - You still haven't had the bread?
          - I told you, its really good!
          - Just go try it, I'm sure you'll like it.
          cond: 1
        - messages:
          - I see you enjoyed the bread.
          - I told you it was good!
          - Anyways, see you later! I've gotta go get some for myself.
          cond: 2
    sawyer:
      name: Chris Sawyer
      colour: 0x4FA1A7
      position: 950.5 70.0 -0.25
      rotation: 0 0
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNWFkMTNmN2Q4ZTVhMTBmNGZiYThiODk3NTVlZGVkNzBmYzk2MTE5YTRlOThkZjc3M2M4NmQzMmNmN2E3ZjNlZiJ9fX0=
      villager:
        type: savanna
        profession: cleric
      dialogue:
        - messages:
          - You really just broke right in, didn't you?
          - No decency huh... what if I was unpresentable?
          - message: ...Anyways, what's up?
            wait: 60
          - Hmm, your internet is down... so you're here for my help again, huh.
          - message:
            - text: Well, what did I expect from you anyways...
              italic: true
          - Well, I have no idea. Maybe turn it off or on again, or something like that.
          cond: 10
          end: 1
        - messages:
          - Persistent, aren't you?
          - Why are you so desperate for internet? Do you have to talk to someone or something?
          - message: 
            - text: "...Oh. I was actually right. "
            - text: "Well..."
              italic: true
            - text: " If you "
            - text: really
              italic: true
            - text: " need internet that much, maybe you could find somewhere with power."
          - Or you could just visit them, but I guess they must not live around here, huh.
          - message: 
            - text: "I "
            - text: have
              italic: true
            - text: " heard there was a cell tower up on the mountain with its own generator, though that could just be a myth."
          cond: 1
          end: 2
        - messages:
          - Still need my help?
          - message:
            - text: "This person must be "
            - text: suuper
              italic: true
            - text: " important to you huh."
          - message:
            - text: "You never seem this eager to contact me..."
              italic: true
          - Well, the mountain is the unmistakeable mass toward the south, if you can't find it.
          - I can't exactly follow you there, you know I don't leave the house.
          - Stay safe or something, I guess.
          cond: 2
          end: -1
        - messages:
          - Oh, hi again... Did you contact her?
          - message: 
            - text: "How'd I know it was a she? "
            - text: "Just my luck, I guess."
              italic: true
          - Anyways, you have something for me to look at?
          - Hmm, A corrupted SD card...
          - message:
            - text: Figures. You're only ever here for my help.
              italic: true
          - message: I'll take a look at it.
            command:
              - 'clear @a ${toGive(item.sdcardcorrupted, 2147483647)}'
              - 'data modify entity ${select.self} HandItems[0] set value ${toSnbt(Object.assign({Count:"1b"}, item.sdcardcorrupted))}'
              - 'execute at ${select.self} run playsound minecraft:entity.item.pickup neutral @a ~ ~ ~ 1 1'
          - message: Follow me upstairs, I'll take this to my PC.
            command:
              - "setblock 958 35 0 minecraft:redstone_block"
              - 'setblock 957 35 0 minecraft:powered_rail[powered=true,shape=ascending_east,waterlogged=false]'
              - 'setblock 958 36 0 minecraft:powered_rail[powered=true,shape=east_west,waterlogged=false]'
              - 'setblock 949 40 -1 stone'
              - 'setblock 950 40 -1 minecraft:powered_rail[powered=false,shape=east_west,waterlogged=false]'
              - 'tag @e[tag=npc-sawyer] add npc-unface'
              - 'summon minecart 957 35 0 {Silent:1,Tags:["sawyer-holder"]}'
              - 'scoreboard players set -held story-sawyer 1'
            wait: 90
          - message: Hmm, this will probably take a while.
            command:
              - '${tp(950.5, 70.0, -0.25, 0, 0)}'
              - 'data modify entity @e[type=glow_item_frame,x=950,y=71,z=0,dx=0,dy=0,dz=0,sort=nearest,limit=1] Item.tag.map set value 298'
              - 'scoreboard players set -held story-sawyer 0'
          - Maybe you can come back later instead? I can't focus on work with you in the room.
          - Come to think of it, since you have so much time anyways, could you help me get my computer mouse?
          - I think I left it in the bio lab at school with my backpack.
          - message: "I'll try to work on it in the meantime. Maybe if you come back early we could talk some more."
            command:
              - 'data modify entity @e[type=glow_item_frame,x=950,y=71,z=0,dx=0,dy=0,dz=0,sort=nearest,limit=1] Item.tag.map set value 275'
              - 'data modify entity ${select.self} HandItems[0] set value {}'
          - See you (hopefully soon)!
          cond: 4
          end: 11
        - messages:
          - Sorry, give me some time, I'm still working on it.
          - I should be finished by the time you get me my mouse.
          cond: 11
          end:
            - 'execute if score biolab quest-status matches -1 run scoreboard players set ${select.self} dialogue-status 3'
            - 'execute unless score biolab quest-status matches -1 run scoreboard players set ${select.self} dialogue-status 11'
        - messages:
          - message: You sure took your time, huh... Not that I was checking the clock or anything, I just noticed.
          - message: Anyways, thanks for the mouse.
            command:
              - 'setblock 949 71 0 stone_button'
              - 'playsound minecraft:block.stone.place neutral @a 949 71 0 1 2'
              - 'clear @a ${toGive(item.mouse, 2147483647)}'
            wait: 120
          - message: Interesting...
            wait: 120
          - message: I've taken a look at the file. Give me a second and then we can start fixing it up.
            command:
              - 'tag @e[tag=npc-sawyer] remove npc-unface'
          - Did I mention you'll be the one doing most of it?
          - message: Well, anyways, here we go...
            command:
              - 'playsound minecraft:block.stone_button.click_on neutral @a 949 71 0 1'
          - message:
            - text: "Welcome to the "
            - text: waiting room
              italic: true
            - text: ". Please be patient while I load the SD card data into memory... My computer is slow so watch out for lag (sorry)."
            global: true
            command:
              - 'tp @a -1400.0 11 -150.0'
              - 'schedule function generated:story/maze/create 1t'
          - message: Oh, are you confused?
            global: true
          - message: I mentioned you would be doing most of the work with fixing it, but don't worry, I'll be keeping you safe.
            global: true
          cond: 3
          end: -1
        - messages:
          - message: The SD card is finally done loading! Sorry it took a while, I hope you weren't too bored.
            global: true
          - message: I'll also load in some random old models into the waiting room that you can take before you get into the card.
            global: true
            command:
              - 'kill @e[tag=maze-weapon-displaystand]'
              - 'function generated:story/maze/weapons/spawnseq/0'
          - message: It seems a big portion of the card is corrupted, which might make it dangerous, so I would recommend you take some tools with you.
            global: true
          - message: While you're at it, let me get you some blocks to build with too.
            global: true
            command:
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
              - 'execute as @a run function generated:story/maze/weapons/buildtool/give'
          - message: Anyways, when you're ready, enter the teleporter and I'll send you into a (hopefully uncorrupted) section of the SD card. No promises, though.
          cond: 5
          end:
            - 'scoreboard players set maze-started story-sawyer 0'
            - 'scoreboard players set ${select.self} dialogue-status -1'
        - messages:
          - message: Here we are, the inside of the SD Card.
            global: true
            command: 
              - 'scoreboard players set maze-started story-sawyer 1'
          - message: Corrupted areas can be a little dangerous, so be careful, I guess. I'm sure you'll be okay, though.
            global: true
          - message: Try throwing them out with "Q"... throwing things at enemies often works, after all.
            global: true
          - message:
              - text: "Of course, you could also just go at your enemies (and friends) like a bonobo, that's always an option, both here "
              - text: and
                italic: true
              - text: " in real life."
            global: true
          - message: Anyways, can you see the floating green path I've lit up?
            global: true
          - message: That should lead you toward a corrupted section of the SD card.
            global: true
          - message: If you could follow it there and take care of the source of the corruption there, I can fix up more of the SD card for you, or something.
            global: true
          - message: Try not to die.
            global: true
          cond: 6
          end: -1
        - messages:
          - message: I see you've taken care of the first source, so I guess I should congratulate you.
            global: true
          - message: You should see portions of the card being fixed up soon.
            gloabl: true
          - message: I've looked at the rest of the SD card, and there should only be two more, just follow the green dust road...
            global: true
          cond: 7
          end: -1
        - messages:
          - message: Alright, that's 2/3 done. Good job.
            global: true
          - message: Most of the card is fixed up, just one sector left to finish off.
            global: true
          cond: 8
          end: -1
        - messages:
          - message: Alright, that should be it. I'm fixing up the remaining parts of the SD card now.
            global: true
            wait: 100
          - message: Let me take you back out and I'll analyze the data next.
            global: true
          - message: Welcome back to reality! I hope you enjoyed your stay.
            command:
              - 'function hitchhike:story/maze/disable'
              - 'tp @a 952 70 -1'
              - 'spawnpoint @a 1007 59 59'
          - message: Give me a minute and I'll get you that SD card.
            wait: 100
          - message: Alright, there you go. No need to thank me, you did most of the work, after all.
            command:
              - "give ${select.player} ${toGive(item.sdcardfixed)}"
              - "scoreboard players set -sdcard story-simon 1"
          - message:
            - text: Also, I had fun too...
              italic: true
          cond: 9
          end: -1
    simon:
      name: Simon Ursus Stephens
      colour: 0x85deb1
      position: 939.25 68 195.00
      rotation: 90 15
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvM2Q0ZjNhMDk3YjgyZGVjODBhMzZkYzRhODkxNmI4MWVmZWZhZGFlM2ExNDU1NTMxODI5NjliNDA5OTYwMGIxZSJ9fX0=
      villager:
        type: snow
        profession: librarian
      dialogue:
        - messages:
            - message: "HEY! What are you doing on my driveway? In fact, what are you doing HERE?"
              command:
                - '# Set correct rail path'
                - 'setblock 945 39 194 minecraft:rail[shape=east_west,waterlogged=false]'
                - 'setblock 942 39 189 minecraft:rail[shape=south_west,waterlogged=false]'
                - "setblock 911 34 193 minecraft:stone"
                - 'setblock 912 34 193 minecraft:powered_rail[powered=false,shape=east_west,waterlogged=false]'
                - 'setblock 937 34 190 minecraft:redstone_wire[east=none,north=side,power=0,south=side,west=none]'
                - 'setblock 929 34 193 minecraft:rail[shape=east_west,waterlogged=false]'
                - 'summon minecart 939.5 39 195.5 {Silent:1,Tags:["simon-holder"]}'
                - "tag ${select.self} add npc-unface"
                - 'scoreboard players set -held story-simon 1'
            - message:
              - text: "There is no way "
              - text: you people
                italic: true
              - text: " are welcome up here. This is private property, and trespassing is "
              - text: ILLEGAL
                bold: true
              - text: "."
              command:
                - "tag ${select.self} remove npc-unface"
            - message: "Get off my land! I'll call the police on you, I WILL."
              command:
                - "scoreboard players set -held story-simon 0"
                - "kill @e[tag=simon-holder]"
                - "${tp(912.0, 64, 193.5, 43, 4)}"
            - "What, you want to go up the mountain? You must think that's really easy, huh."
            - message: "You don't look at all prepared to go up that mountain, and you can bet I won't be letting you through MY property until you are."
              global: true
              command:
                - 'scoreboard players set @a foodGoal 12'
                - type: quest
                  value: picnic
                - type: quest
                  value: leather
                - type: quest
                  value: diet
                - type: quest
                  value: preparedness
            - message:
              - text: "What, you don't have money to buy clothes? Just go scrounging for coins at the fountain or "
              - text: whatever
                italic: true
              - text: " you people do."
            - message: "Remember, you better not come back until you're actually ready to go up."
          cond: 1
          end: 2
        - messages:
            - What did I tell you? Don't come back until you're done preparing.
            - How many times should I say it to get it through your thick skull?
            - Ugh, whatever. I have nothing more to say to you.
          cond: 2
          end: -1
        - messages:
            - message:
              - text: "Oh hey again, I didn't see you there. "
              - text: Sorry.
                italic: true
            - message:
              - text: "I was busy admiring my "
              - text: "1997 Limited Edition Honda Civic"
                color: dark_red
                bold: true
              - text: ". 17 million Bov by the way. I know, you must be wishing you had a car this nice."
            - Don't worry, if you work as hard as I do, one day you might be almost as successful too.
            - message: Anyways, I see you're pretty determined to get up this mountain, huh.
              command:
                - 'setblock 949 40 -1 minecraft:redstone_block'
                - 'setblock 949 41 -1 minecraft:powered_rail[powered=true,shape=east_west,waterlogged=false]'
                - 'setblock 950 40 -1 minecraft:powered_rail[powered=true,shape=ascending_west,waterlogged=false]'
                - 'setblock 957 35 0 minecraft:powered_rail[powered=false,shape=east_west,waterlogged=false]'
                - 'setblock 958 35 0 minecraft:stone'
                - 'setblock 955 35 1 minecraft:redstone_wire[east=side,north=none,power=0,south=none,west=side]'
                - 'tag @e[tag=npc-sawyer] add npc-unface'
                - 'summon minecart 950 40 -1 {Silent:1,Tags:["sawyer-holder"]}'
                - 'scoreboard players set @e[tag=npc-sawyer] dialogue-status -1'
                - 'scoreboard players set -held story-sawyer -1'
            - At least I can respect that. Determination (of which I have a lot) is very important if you want to be as successful as I.
            - It seems you did listen and diligently prepared as I had requested.
            - Not bad! At least you can listen to directions. Most people don't do that very well.
            - Before you get on your journey, I'll have you do a couple more things to prepare though.
            - message: Come on in, I have some things to give you.
              command:
                - "setblock 945 39 194 minecraft:rail[shape=north_east,waterlogged=false]"
                - "setblock 911 34 193 minecraft:redstone_block"
                - 'setblock 912 34 193 minecraft:powered_rail[powered=true,shape=ascending_west,waterlogged=false]'
                - 'setblock 956 44 203 minecraft:powered_rail[powered=false,shape=east_west,waterlogged=false]'
                - 'setblock 960 44 202 minecraft:rail[shape=north_south,waterlogged=false]'
                - 'setblock 929 34 193 minecraft:rail[shape=east_west,waterlogged=false]'
                - '# Open gate'
                - 'clone 907 59 184 918 60 192 907 64 184'
                - 'playsound minecraft:block.iron_door.open block @a 913 64 192.5 10 0.8'
                - 'summon minecart 912 34 193 {Silent:1,Tags:["simon-holder"]}'
                - "tag ${select.self} add npc-unface"
                - 'scoreboard players set -held story-simon -1'
            - I have an old SD card from a while ago that contains a nice map of the hiking trail up the mountain.
            - message:
              - text: "Unfortunately, it corrupted when windows formatted it without even asking me!"
              command:
                - "scoreboard players set -held story-simon 0"
                - "kill @e[tag=simon-holder]"
                - "${tp(956.5, 74, 203.5, 90, 55)}"
            - message: 
              - text: "Okay, it did ask me "
              - text: once
                italic: true
              - text: " but didn't even ask to confirm after I accidentally clicked OK. Who does that?"
            - message: "... found it."
              command:
                - "tag ${select.self} remove npc-unface"
            - message: Anyways, it was right here in this drawer.
            - message: Take that card and get it fixed up, and once you get the map in your hands you can go right on up the mountain.
              command:
                - "scoreboard players set -sdcard story-simon 0"
                - type: quest
                  value: sdcard
                - "give ${select.player} ${toGive(item.sdcardcorrupted)}"
              global: true
            - message:
              - text: "... And while you're at it, get me some water. Not just any water: I want "
              - text: La Croix Sparkling Water
                bold: true
                italic: true
                color: dark_aqua
              - text: .
              global: true
              command:
                - scoreboard players set -lacroix story-simon 0
                - type: quest
                  value: lacroix
            - message:
              - text: "Don't give me any of that \"processed tap water\" or \"mineral water\" "
              - text: normal
                italic: true
              - text: " people drink."
            - What, you don't want to?
            - You think you can just walk through MY property, dirty MY driveway, waste MY time, and give NOTHING in return?
            - Freeloaders, I say, FREELOADERS. That's what you are. I won't stand for it.
            - message:
              - text: "I just want a drink! It's the "
              - text: least
                bold: true
              - text: " you could do."
            - message: Here, I'll even give you some money to buy it with. This is probably more than enough.
              command:
                - "give ${select.player} ${toGive(item.money[500], 1)}"
                - "give ${select.player} ${toGive(item.money[100], 2)}"
            - I better not see you back here without it.
            - message: What are you loitering around for? Get on it!
              command:
                - 'setblock 956 44 204 minecraft:redstone_block'
                - 'setblock 956 44 203 minecraft:powered_rail[powered=true,shape=ascending_west,waterlogged=false]'
                - 'setblock 945 39 194 minecraft:rail[shape=north_west,waterlogged=false]'
                - 'setblock 942 39 189 minecraft:rail[shape=north_south,waterlogged=false]'
                - 'setblock 943 39 185 minecraft:redstone_wire[east=side,north=none,power=0,south=none,west=side]'
                - 'setblock 960 44 202 minecraft:rail[shape=north_south,waterlogged=false]'
                - 'setblock 942 39 182 stone'
                - 'setblock 942 39 183 minecraft:powered_rail[powered=false,shape=north_south,waterlogged=false]'
                - 'summon minecart 956.5 44 203.5 {Silent:1,Tags:["simon-holder"]}'
                - "tag ${select.self} add npc-unface"
                - 'scoreboard players set -held story-simon -1'
                - '# set up position for later: ${tp(942.5, 69, 183.5, 135, -10)}'
          cond: 3
          end: -1
        - messages:
            - What are you doing back here? I told you I don't let freeloaders on my land.
            - Don't come back until you have exactly what I want.
            - Good-Bye.
          cond: 4
          end: -1
        - messages:
            - Oh, you're back already?
            - message:
              - text: "Sorry, I was distracted again; I was admiring my one-of-a-kind "
              - text: Sedimentary Cryptocrystalline Quartz (Chert)
                color: 0x9ba5a8
              - text: " stone."
            - Notice the beautiful tumescent shape? I chose it myself.
            - Amazing, isn't it? It takes a keen eye to notice the beautifully detailed ridges along the surface, almost vascular in their branching pattern.
            - I just can't help but just take it in every now and then... its beauty, I mean.
            - So, I see you brought back my LaCroix! Admirable.
            - message:
              - text: "I'll take that..."
                italic: true
              command:
              - type: function
                value: generated:story/simon/drink
              wait: 100
            - message:
              - text: Ahh
                italic: true
              - text: ", That was pretty good. You can keep the change, don't worry."
            - Consider it a gift; I'm just generous like that.
            - Anyways, see you later!
          cond: 5
          end:
            - execute unless score sdcard quest-status matches -1 run scoreboard players set ${select.self} dialogue-status 6
            - execute if score sdcard quest-status matches -1 run scoreboard players set ${select.self} dialogue-status 8
        - messages:
            - Hi again! I see you're as interested in Morton as I am!
            - Oh, Morton is the name of the rock, in case you couldn't tell.
            - Anyways, glad to see another connoisseur of mineral collection; it's hard to find people interested in such a high-class hobby nowadays.
            - Feel free to observe as long as you want.
          cond: 6
          end: 6
            # - 'execute if score sdcard quest-status matches -1 run scoreboard players set ${select.self} dialogue-status 7'
        - messages:
            - Where's my LaCroix?? I told you I wouldn't talk to you unless you got it.
            - Get out of my house!
          cond: 7
          end: -1
        - messages:
            - I see you've fixed my SD card.
            - message:
              - text: Took you long enough...
                italic: true
            - message: Anyways, let me take that away from you before you break it.
              command:
                - 'clear @a ${toGive(item.sdcardfixed, 2147483647)}'
                - 'data modify entity ${select.self} HandItems[0] set value ${toSnbt(Object.assign({Count:"1b"}, item.sdcardfixed))}'
                - 'execute at ${select.self} run playsound minecraft:entity.item.pickup neutral @a ~ ~ ~ 1 1'
            - message: Follow me, I'll get this plugged in.
              command:
                - 'setblock 942 39 183 minecraft:powered_rail[powered=true,shape=ascending_north,waterlogged=false]'
                - 'setblock 942 39 182 redstone_block'
                - 'setblock 942 39 189 minecraft:rail[shape=north_south,waterlogged=false]'
                - 'setblock 945 39 194 minecraft:rail[shape=north_west,waterlogged=false]'
                - 'setblock 960 44 202 minecraft:rail[shape=north_east,waterlogged=false]'
                - 'setblock 964 44 201 minecraft:stone'
                - 'setblock 963 44 201 minecraft:powered_rail[powered=false,shape=east_west,waterlogged=false]'
                - 'summon minecart 942.5 39 183.5 {Silent:1,Tags:["simon-holder"]}'
                - "tag ${select.self} add npc-unface"
                - 'scoreboard players set -held story-simon 1'
              wait: 200
            - message: Hmm...
              command:
                - "scoreboard players set -held story-simon 0"
                - "kill @e[tag=simon-holder]"
                - "${tp(963.5, 74, 201.5, 270, 60)}"
                - 'playsound minecraft:entity.item_frame.remove_item neutral @a ~ ~ ~ 1'
                - 'summon glow_item_frame 963 74 201 {Silent:1b,Facing:4b,Invulnerable:1b,Invisible:1b,Fixed:1b,Tags:["inserted_sdcard"],Item:{id:"minecraft:daylight_detector",Count:1b,tag:{Enchantments:[{}]}}}'
                - 'data modify entity ${select.self} HandItems[0] set value {}'
              wait: 40
            - Oh wow, it actually works! What a surprise.
            - Let me look at the files and get you that map.
            - Feel free to relax, but don't touch anything, please. I don't want your grubby hands on my expensive furniture.
            - message: Here you go, I've even printed out the map for you. Pick it up on the left and make sure you take a good look at it before you go up.
              command:
                - 'summon item 964.5 75.5 197.5 {Item:${toSnbt(Object.assign({Count:"1b"}, item.map))}}'
                - 'playsound minecraft:block.piston.contract neutral @a 964.5 75.5 197.5'
                - "tag ${select.self} remove npc-unface"
            - You're welcome, by the way.
            - Anyways, I don't want you staying around any longer than necessary.
            - message: Follow me and I'll get you on your way up that mountain.
              command:
                - 'setblock 929 34 193 minecraft:rail[shape=south_east,waterlogged=false]'
                - 'setblock 945 39 194 minecraft:rail[shape=north_east,waterlogged=false]'
                - 'setblock 960 44 202 minecraft:rail[shape=north_east,waterlogged=false]'
                - 'setblock 964 44 201 redstone_block'
                - 'setblock 963 44 201 minecraft:powered_rail[powered=false,shape=ascending_east,waterlogged=false]'
                - 'summon minecart 963.5 44 201.5 {Silent:1,Tags:["simon-holder"]}'
                - "tag ${select.self} add npc-unface"
                - 'scoreboard players set -held story-simon 1'
                - '# ${tp(929.5, 64, 197.5, 135, 0)}'
              wait: 300
            - Alright, the trail starts right through this gate. Good luck!
          cond: 8
          end: -1
    hurm:
      name: Hurm Etkcraub
      position: 1075.7 125 355.5
      rotation: -90 30
      colour: 0x183aab
      villager:
        type: snow
        profession: fisherman
      dialogue:
        - messages:
          - Hey! Who goes there?! Someone trying to break in?
          - What are you doing barging into my home?
          - message: I have a fishing rod and I'm not afraid to use it.
            wait: 120
          - You're telling me you want to get up the mountain?
          - message:
            - text: "At "
            - text: "this"
              italic: true
            - text: " ungodly hour?"
          - ...Nevermind, I won't ask.
          - message:
            - text: "Unfortunately, the only way to the trails is through the huge lake right here, and the only way through the lake is on "
            - text: my
              italic: true
            - text: " precious boat."
          - And I can't exactly go letting random people who have no idea what they're doing through my prized fishing ground.
          - These waters are dangerous; fall out of your boat and those piranhas will make quick work of you.
          - message: "How about this: To prove you're not all talk, why don't you catch and cook me some fish to eat?"
            command:
              - scoreboard players set -caught hurm-fish-caught 0
              - type: quest
                value: campfire
              - type: quest
                value: grillfish
          - message: 
            - text: I was in the mood for a late-night snack anyways.
              italic: true
          - That seems like a pretty fair ask given all that I'm helping you with.
          - You can find an old firepit I've used just outside to the east.
          - I'll even let you use my fishing rods; they're in the garage.
          - If you need wood there's a grove I use for firewood back northeast.
          - I'm sure you can at least start a fire and grill some food if you're set on climbing an entire mountain.
          - I'll be expecting you back soon, good luck.
          cond: 1
          end:
            - execute unless score grillfish quest-status matches -1 run scoreboard players set ${select.self} dialogue-status 2
            - execute if score grillfish quest-status matches -1 run scoreboard players set ${select.self} dialogue-status 3
        - messages:
          - Shush! I'm considering crustaceans.
          - Don't bother me until you have my fish.
          cond: 2
          end:
            - execute unless score grillfish quest-status matches -1 run scoreboard players set ${select.self} dialogue-status -1
            - execute if score grillfish quest-status matches -1 run scoreboard players set ${select.self} dialogue-status 3
        - messages:
          - message: Nice, you're back! Thanks for the fish!
            command:
              - execute at ${select.self} run function hitchhike:story/hurm/clear_one_fish
              - execute at ${select.self} run function hitchhike:story/hurm/clear_one_fish
              - execute at ${select.self} run function hitchhike:story/hurm/clear_one_fish
              - execute at ${select.self} run function hitchhike:story/hurm/clear_one_fish
              - execute if score -cleared hurm-fish matches 1 run data modify entity ${select.self} HandItems[0] set value {id:"minecraft:cooked_salmon",Count:1b}
              - execute if score -cleared hurm-fish matches 0 run data modify entity ${select.self} HandItems[0] set value {id:"minecraft:cooked_cod",Count:1b}
              - 'execute at ${select.self} run playsound minecraft:entity.item.pickup neutral @a ~ ~ ~ 1 1'
          - So, anyways, I've been thinking a lot about crustaceans recently, specifically crabs.
          - message: Did you know that crustaceans (Crustacea /krʌˈsteɪʃə/) form a large, diverse arthropod taxon which includes such animals as crabs, lobsters, crayfish, shrimp, krill, prawns, woodlice, barnacles, copepods, amphipods and mantis shrimp? The crustacean group can be treated as a subphylum under the clade Mandibulata; because of recent molecular studies it is now well accepted that the crustacean group is paraphyletic, and comprises all animals in the clade Pancrustacea other than hexapods. Some crustaceans (Remipedia, Cephalocarida, Malacostraca) are more closely related to insects and the other hexapods than they are to certain other crustaceans. The 67,000 described species range in size from Stygotantulus stocki at 0.1 mm (0.004 in), to the Japanese spider crab with a leg span of up to 3.8 m (12.5 ft) and a mass of 20 kg (44 lb). Like other arthropods, crustaceans have an exoskeleton, which they moult to grow. They are distinguished from other groups of arthropods, such as insects, myriapods and chelicerates, by the possession of biramous (two-parted) limbs, and by their larval forms, such as the nauplius stage of branchiopods and copepods. Most crustaceans are free-living aquatic animals, but some are terrestrial (e.g. woodlice), some are parasitic (e.g. Rhizocephala, fish lice, tongue worms) and some are sessile (e.g. barnacles). The group has an extensive fossil record, reaching back to the Cambrian. More than 7.9 million tons of crustaceans per year are produced by fishery or farming for human consumption, most of it being shrimp and prawns. Krill and copepods are not as widely fished, but may be the animals with the greatest biomass on the planet, and form a vital part of the food chain. The scientific study of crustaceans is known as carcinology (alternatively, malacostracology, crustaceology or crustalogy), and a scientist who works in carcinology is a carcinologist...
            wait: 100
            command:
              - 'schedule function generated:story/hurm/eat_fish 20t'
          - ...Sorry for talking while eating, I'm not used to having company.
          - message:
            - nbt: fish_message
              storage: hitchhike:story/hurm
            wait: 80
          - Well done..? Feel free to take the boat out on the dock for a spin, but please try not to sink it.
          - (Also please bring it back afterwards, that would be great.)
          - Good luck with that hike, I've heard its difficult.
          cond: 3
          end: -1
    cashier:
      name: Paoule Enrique
      position: 891.5 64 -152.5
      rotation: 180 0
      colour: 0xeb7060
      villager:
        type: savanna
        profession: shepherd
      dialogue:
        - messages:
          - "Hi, welcome to Safeway!"
          - "If you want to buy anything, just drop it off here on the conveyor."
        - messages:
          - message:
            - nbt: welcome_message
              storage: hitchhike:safeway
              interpret: true
            command:
              - type: function
                value: "hitchhike:safeway/pay"
          - message:
            - nbt: success_msg
              storage: hitchhike:safeway
              interpret: true
          cond: 5
    cameron:
      name: Cameron "Cam" Au-Flauge
      position: 944.3 96.8 17.3
      rotation: 140 35
      colour: 0x197037
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZWI4NDE4YzQ2MWY2M2Q2YWFkMzkzMmE2MzlmY2UzZmVjMjI3YTM3NzRhNTliODUxZmZiZTY1NTg3NGViNzkxIn19fQ==
      villager:
        type: swamp
        profession: nitwit
      dialogue:
        - messages:
          - Whoa! How'd you find me here?
          - Darn, I thought I had the perfect hiding spot...
          - I guess I've lost then. I can't believe I didn't see you coming up here.
          - Wait, are you not part of the game?
          - Sweet! Can you keep quiet about finding me here? I'm sure nobody else will be able to.
          - Hmm, what can I give you as incentive...
          - message:
            - text: Here, take my spyglass.
            command:
              - "give ${select.player} ${toGive(item.spyglass)}"
          - If you were able to sneak up on me while I was using it, it clearly isnt helping much, anyways.
          - I wonder if you'll accidentally stumble across anyone else.
          - Remember, there was nobody here.
          end: -1
    muller:
      name: Egress Muller
      position: 895.5 77 -156.7
      rotation: 180 20
      colour: 0x608082
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNjhlOWNiMzE3ZmY1NzJmY2EwNjI4MDhmNGJiYmVmNzJiZTc1NTIxZjM2OWJiNDcxZmY4YTczNjE5YzE5NCJ9fX0=
      villager:
        type: plains
        profession: mason
      dialogue:
        - messages:
          - Woah, hey there. What're you doing all the way up here? You don't look like a security guard.
          - Regardless, I'm part of the big game of hide and seek I'm sure you know is going on.
          - Please don't let anyone know I'm here.
          - Do try to leave this area soon before someone takes notice, though. Have a nice one!
          end: 2
        - messages:
          - message:
            - text: Shh! Stop bothering me before I get caught!
              italic: true
          cond: 2
          end: -1
    fishjar:
      name: Cullus Major
      position: 915.5 55 -78.5
      rotation: 90 0
      colour: 0xbdaa77
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZThkZDdkNDM0MWExODhkZTBiOWJmMjNlZmU0MTljNjRhMzQ1ODNjNjExYzFlYzllMWJjNzVmNGJhOWJlYzY1YyJ9fX0=
      villager:
        type: snow
        profession: nitwit
      dialogue:
        - messages:
          - message:
            - text: "Hey there, welcome to "
            - text: Jar
              bold: true
              italic: true
            - text: ring Estimations
              italic: true
            - text: ", your very own coin-counting game show!"
          - To get tokens, simply place your cash in the chest right here!
          - Only 10b (0.10 Bov) a token!
          - Use your tokens to guess the amount of money in the jar; 1 BovToken coin (BTC) represents 1 Bov.
          - If you are within 2.50 Bov of the real total, you get everything in the jar!
          - When you're ready to play, come talk to me and I'll fill that jar up for you.
          end: 2
        - messages:
            - message: Alright, here come the coins!
              command:
                - 'schedule function generated:story/fountain/jar/fill 20t'
            - Guess the total value in the jar, and place your bets to the right side.
            - Come back again when you are ready to find out the real total.
            - Make sure to choose carefully, and best of luck!
          cond: 2
          end: 3
        - messages:
          - message: Alright, I'm counting them up now!
            command:
              - 'function generated:story/fountain/jar/drain'
          - Good luck...
          cond: 3
          end: -1
        - messages:
          - Congratulations on guessing the total!
          - Feel free to pick up your reward, it's all yours!
          - If you wish to play another time, simply talk to me again.
          cond: 4
          end: 2
        - messages:
          - Welp, unfortunately, that's it folks!
          - A valiant attempt, but unfortunately your guess was not quite right.
          - Feel free to try again, though! Just speak to me when you want to.
          cond: 5
          end: 2
    fountainman:
      name: Sylvian Bismarck
      position: 899.5 64 -53.3
      rotation: 0 0
      colour: 0x9c389c
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzE5ODRkOGE2ODRkM2JiZjZhZTk1MzExMDY0Mzk3NDE3OTM2NDZkMzg0YmZjYjFlNGFkOTQ5ZDU3YzI1In19fQ==
      villager:
        type: swamp
        profession: cleric
      dialogue:
        - messages:
          - message: Why hello there...
            wait: 100
          - message: Feeling short on... money?
            wait: 100
          - message: Want a little extra... cash?
            wait: 100
          - message:
            - text: "Fret not, for "
            - text: I've
              italic: true
            - text: " got the perfect opportunity for you."
          - See any of those coins kids have been throwing into the fountain for years, representing all their hopes and dreams?
          - message:
            - text: "No?"
              italic: true
            - text: " Well that's exactly it, isn't it? Where have they been going?"
          - message:
            - text: "You see... hopes and dreams are "
            - text: "expensive"
              bold: true
            - text: "."
          - Shouldn't someone much more eloquent (such as yourself) be more deserving of such wealth?
          - message:
            - text: Maybe try taking a look beneath the fountain...
              italic: true
          - Anyways, pay no mind, these are just the ramblings of an old man.
          - Have a pleasant day.
          end: 1
        - messages:
          - Hmm? Something under the fountain? What are you talking about?
          cond: 1
          end: 2
        - messages:
          - Hello there, hope your day is going well...
          cond: 2
          end: 1
    bosnum:
      name: Bosnum Bert
      position: 1093.7 67 -71.5
      rotation: -90 20
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZDA5ZWJiY2QyMTU0MzdkYWRjNDc1NDNkM2JjZGVmMTY0MmFmMjI0YzVhNGE2MTQzZDk2NzczZGFkZjg5ZGM3ZCJ9fX0=
      villager:
        type: desert
        profession: leatherworker
      dialogue:
        - messages:
          - Oh, hi. Did I leave the door unlocked?
          - You don't live next door...
          - Well, whatever. Not like this house can get any more cramped.
          - Feel free to take a look around.
          end: -1
    walter:
      name: Walter Wheat
      position: 1090.5 66 -55.0
      rotation: 90 10
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODgzZjQ3NTc3YTBiYmNhYjgyZDgxZmE4MzdlMGFmZmM2NzY0MjU0NzBmYTViOWEyNWJjYWQ1MmJkNjhjMTAzNiJ9fX0=
      villager:
        type: desert
        profession: butcher
      dialogue:
        - messages:
          - What are you doing in my trailer.
          - This is my final warning. Cross me, and there will be consequences.
          - There is absolutely nothing unusual being cooked here.
          end: -1
    plenton:
      name: Mrs. Plenton
      position: 1098.5 66 -45.5
      rotation: 0 40
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvM2JmZmVjZWY3MmJiYzdjNTA4ZTk5YTg4NzFiMjAyMDZmMzBiODdhZDQ0OTg2YmNhZTBkNWJiNTk5ZmI3MGIzIn19fQ==
      villager:
        type: plains
        profession: none
      dialogue:
        - messages:
          - Oh my!
          - What are you doing, barging in on an old lady in the bath!
          - No need to gawk at me, as you can see I don't have any other places with this much water, do I?
          - Good heavens, your parents should have taught you some manners.
          - Pardon you!
          end: -1
    birthdayboy:
      name: Matt Norma
      position: 949.5 64.8 76.3
      rotation: -180 30
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTk5NDc1ZGQyOTQ3Njg2Y2JkN2Y3MmM4OGNhZDM3MjA1ZGM1OWNiZDhlZDE3YTAzZTAyYzIxODVhODZiM2MwYyJ9fX0=
      villager:
        type: plains
        profession: nitwit
      dialogue:
        - messages:
          - Oh hi! Are you here for my birthday party?
          - You must have been late, I'm sure everyone else is coming soon too!
          - Don't worry, its only been an hour, it's not that bad.
          - ...Oh, you aren't here for my birthday?
          - Well, you could stay and have some cake if you want, I guess.
          - message: ...You're busy?
            wait: 100
          - Sorry to bother you then... Have a nice day!
          end: 2
        - messages:
          - Don't worry, more cake to myself! Hahaha.
          cond: 2
          end: -1
    poolgoer:
      name: Buck Crady
      position: 880.5 76 30.7
      rotation: -180 -20
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZTIyNWNjNDBmNWRjZTlkNjdkMTIxNzUxYmMyOTIxNWRjODljZDRjMjJlNjEyMjk3MWVmNzg0NTFmODQyMjQyZSJ9fX0=
      colour: 0x9c231a
      villager:
        type: jungle
        profession: weaponsmith
      dialogue:
        - messages: 
          - ...Yeah, so I'm also part of that whole "Hide and Seek" thing, y'know?
          - ...And I thought to myself, "why not hide somewhere that's also fun?"
          - And nobody's really found me much yet, so I'd say I chose pretty well.
          - You better not go peeping about this to anybody else though.
          end: -1
    giffy:
      name: Giffy Hapsteen
      position: 864.5 70 3.5
      rotation: 27 5
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvY2RlZGQ2ZTQ2ZTlhOGY1NDViNmZhZjFhZGQxYjE2YjJjNjNhNTgwNDMyYmM2ZDZlNmMwZDJiM2M2ZjI5NGE1In19fQ==
      colour: 0x86943a
      villager:
        type: jungle
        profession: mason
      dialogue:
        - messages:
          - Heheh... Don't mind me, I'm just busy admiring my own genius.
          - No one will ever expect that I, a fully-grown adult man, is hiding in the high-school student restroom!
          - What an ingenious plan...
          - Anybody who searches in here must be real sicko to go into a children's bathroom.
          end: -1
    samsung:
      name: Samantha Sung
      position: 1059.3 65 0.5
      rotation: 90 -15
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvMTdjYzY2MTViYjRjODMxMWZjZDU3Mzk0NWZiNTQwNWI5YWZjYjBlYjU3YTgxY2ZhZTMxOGZlMjQwYWY2ZTVlOCJ9fX0=
      colour: 0x945da1
      villager:
        type: taiga
        profession: cleric
      dialogue:
        - messages:
          - Ah, I thought I heard someone rummaging about.
          - message: 
            - text: "Don't mind me, I was just admiring the "
            - text: "Deep Blacks™"
              bold: true
              italic: true
            - text: ' feature of my 230" Class 8k QLED Smart TV.'
          - It's so dark I couldn't even distinguish it from reality.
          end: -1
    lucky:
      name: Lucky Goldstar
      position: 1042.6 66.1875 -3.3
      rotation: -135 45
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYjIyOTZlYTE2MGYxYjY2ZGYzMjk1MzdkNmQxNmFhZDE3OWZmZDk3MzdhOTJkMjk0YWVlNzU2NjJjMGQ2ZDQzMSJ9fX0=
      colour: 0x3db330
      villager:
        type: jungle
        profession: nitwit
      dialogue:
        - messages:
          - message:
            - text: SHH!
              italic: true
            - text: " Don't let Sam hear me! She'll definitely kick me out."
          - This is the perfect hiding spot! I can't lose it!
          - Nobody will dare to look into someone else's house, especially Sam's- I'm genius!
          - I am sure to win, so please dont let Sam know...
          end: -1
    deagol:
      name: Degol Dobby
      position: 789.3 63.6 95.5
      rotation: 90 10
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvOTkyZjIxN2RhMDNjZjgzMWRhNjBjM2IzMzI4N2QzMzQ2MWQ4NzE1MzIxZjEzYjdjMzFjZmFmNjY0OGZmMyJ9fX0=
      villager:
        type: taiga
        profession: none
      dialogue:
        - messages: 
          - message: "..."
            wait: 100
          - message: "Break... Time..?"
            wait: 120
          - message: Hehehehe
            wait: 80
          - No breaks for Degol!
          end: -1
    eichhornchen:
      name: Eich Hornchen
      position: 665.7 57 -29.7
      rotation: 50 25
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNzI0ZTRiMmNlZTJhNmIzNmU5YmFjZDRiZWRkMGQ0ZGJjMTdkYTMxMTg2NjI3NGFmYzRiOWVkNTBlYTc3MTdlMiJ9fX0=
      villager:
        type: desert
        profession: none
      colour: 0xebe34b
      dialogue:
        - messages:
          - Nice hiding spot, isn't it?
          - I dug it myself.
          end: -1

quest:
  visitfriend: # visit friend's house
    name: Phone-A-Friend
    hint: The internet seems to have gone down, but you don't know why. Luckily, you happen to know a programmer friend, maybe pay him a visit?
    description: Unlawfully break and enter into your friend's house.
    condition:
      type: player
      all: true
      condition:
        - if entity @s[x=947,y=70,z=-3,dz=4,dx=6,dy=3]
      count: 1
    end:
      - type: score
        value: ${npc.sawyer} dialogue-status 10
  bread:
    name: Whole Wheat
    hint: Maintain a wheat-based diet (whole). # description to show before the quest is done (optional)
    description: Eat ${condition.count} pieces of bread.
    condition:
      type: player # this type stores data for every player
      stat: minecraft.used:minecraft.bread
      count: 5
    end:
      - type: score
        value: ${npc.wheatish} dialogue-status 2
  preparedness:
    name: Preparing & Planning
    description: Remember to be prepared for your hike! Simon demands it. Make sure you are (1.) not hiking on an empty stomach, (2.) properly dressed, and (3.) have a mid-hike snack planned!
    condition:
      type: nest
      value:
        - type: cond
          value:
            - if score diet quest-status matches -1
            - if score leather quest-status matches -1
            - if score picnic quest-status matches -1
          count: 3
        - type: player
          all: true
          condition:
            -  if entity @s[x=906,y=64,z=186,dx=13,dz=5,dy=1]
          count: 1
          weight: 1
    end:
      - type: score
        value: ${npc.simon} dialogue-status 3
  diet:
    name: Full Stomach
    description: Fill your stomach! Remember to keep a balanced diet (Fruit, vegetables, meat). How will Simon know if you finished this? A mystery.
    condition:
      type: nest # listed values are also condition objects
      value:
        - type: nest # q-1-0
          value:
            - type: player
              stat: minecraft.used:minecraft.carrot #q-1-0-0
              count: 1
              overflow: true # this quest can be completed to over 100% completion
            - type: player
              stat: minecraft.used:minecraft.baked_potato #q-1-0-1
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.beetroot #q-1-0-2
              count: 1
              overflow: true
          count: 2 # sum of child completeions must total 500% (5 pieces of food)
        - type: nest #q-1-1
          value:
            - type: player
              stat: minecraft.used:minecraft.cooked_beef
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.cooked_porkchop
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.cooked_chicken
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.cooked_rabbit
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.cooked_mutton
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.cooked_cod
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.cooked_salmon
              count: 1
              overflow: true
          count: 1
        - type: nest # q-1-2
          value:
            - type: player
              stat: minecraft.used:minecraft.sweet_berries #q-1-0-0
              count: 1
              overflow: true # this quest can be completed to over 100% completion
            - type: player
              stat: minecraft.used:minecraft.apple #q-1-0-1
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.glow_berries #q-1-0-2
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.melon_slice #q-1-0-2
              count: 1
              overflow: true
          count: 2
        # - type: player
        #   all: true
        #   condition:
        #     -  if entity @s[x=906,y=64,z=186,dx=13,dz=5,dy=1]
        #   count: 1
        #   weight: 1
  leather:
    name: Dressing Warm
    description: Wear 3 pieces of leather armor and show your new drip to Simon.
    hint: Make sure to dress warm!
    condition:
      type: nest
      value:
        - type: player
          all: true
          condition: # each condition in the list, when satisfied, will increment the score by 1. think of each condition as in `execute as @a at @s <conditions> run`
            - if entity @s[nbt={Inventory:[{Slot:100b, id:"minecraft:leather_boots"}]}]
            - if entity @s[nbt={Inventory:[{Slot:101b, id:"minecraft:leather_leggings"}]}]
            - if entity @s[nbt={Inventory:[{Slot:102b, id:"minecraft:leather_chestplate"}]}]
            - if entity @s[nbt={Inventory:[{Slot:103b, id:"minecraft:leather_helmet"}]}]
          count: 3
        # - type: player
        #   all: true
        #   condition:
        #     -  if entity @s[x=906,y=64,z=186,dx=13,dz=5,dy=1]
        #   count: 1
        #   weight: 1
  picnic:
    name: Picnic Packing
    description: Bring a picnic of healthy foods with you. Remember, you still have to bring the food back to Simon.
    hint: Make sure you have enough food for a mid-hike snack!
    condition:
      type: nest
      value:
        - type: player
          all: true
          condition: # each condition in the list, when satisfied, will increment the score by 1. think of each condition as in `execute as @a at @s <conditions> run`
            - if entity @s[nbt={Inventory:[{id:"minecraft:milk_bucket"}]}]
            - if entity @s[nbt={Inventory:[{id:"minecraft:bread"}]}]
            - if entity @s[nbt={Inventory:[{id:"minecraft:apple"}]}]
            - if entity @s[nbt={Inventory:[{id:"minecraft:melon_slice"}]}]
            - if entity @s[nbt={Inventory:[{id:"minecraft:sweet_berries"}]}]
            - if entity @s[nbt={Inventory:[{id:"minecraft:glow_berries"}]}]
            - if entity @s[nbt={Inventory:[{id:"minecraft:cookie"}]}]
            - if entity @s[nbt={Inventory:[{id:"minecraft:dried_kelp"}]}]
          count: 2
        # - type: player
        #   all: true
        #   condition:
        #     -  if entity @s[x=906,y=64,z=186,dx=13,dz=5,dy=1]
        #   count: 1
        #   weight: 1
  lacroix:
    name: LaCroix Delivery
    description: Get Simon some LaCroix sparkling water.
    condition:
      type: nest
      value:
        - type: cond
          value:
            - "if entity @a[nbt={Inventory:[${toSnbt(item.store.sold.lacroix)}]}]"
        - type: cond
          value:
            - "if entity @a[nbt={Inventory:[${toSnbt(item.store.sold.lacroix)}]},x=939,y=69,z=181,dx=6,dy=2,dz=5]"
            - "if score -lacroix story-simon matches 1"
          count: 2
          weight: 1
    end:
      - type: score
        value: "${npc.simon} dialogue-status 5"
  biolab:
    name: Missing Mouseketeer
    description: Retrieve Chris's mouse from the bio lab.
    condition:
      type: nest
      value:
        - type: cond
          value:
            - "if score cleaned biolab matches 1"
            - "if entity @a[nbt={Inventory:[${toSnbt(item.mouse)}]}]"
          count: 2
        - type: cond
          value:
            - "if entity @a[nbt={Inventory:[${toSnbt(item.mouse)}]},x=947,y=70,z=-3,dz=4,dx=6,dy=3]"
          weight: 1
    end:
      - type: score
        value: "${npc.simon} dialogue-status 5"
  sdcard:
    name: Decorruption
    description: Decorrupt the SD Card given by Simon. Don't know how? Maybe someone familiar with programming would know better...
    condition:
      type: nest
      value:
        - type: cond
          value:
            - if score -sdcard story-simon matches 1
        - type: cond
          value:
            -  "if entity @a[x=939,y=69,z=181,dx=6,dy=2,dz=5]"
          weight: 1
    end:
      - execute if score lacroix quest-status matches -1 run scoreboard players set @e[tag=npc-simon,limit=1] dialogue-status 8
      - execute unless score lacroix quest-status matches -1 run scoreboard players set @e[tag=npc-simon,limit=1] dialogue-status 7
  campfire:
    name: Fire-lighting
    description: Craft and light a campfire at Hurm's firepit.
    condition:
      type: nest
      value:
        - type: cond
          value:
            - "if score -tree0 hurm-chopped matches 1"
            - "if score -tree0 hurm-chopped matches 1"
            - "if score -tree0 hurm-chopped matches 1"
          count: 3
        - type: cond
          value:
            - "if score -mined hurm-mined matches 1"
          count: 1
        - type: player
          stat: minecraft.crafted:minecraft.campfire
          count: 1
        - type: player
          stat: minecraft.used:minecraft.campfire
          count: 1
  grillfish:
    name: Fish-n-chips
    description: Grill some fish for Hurm's late-night snack!
    condition:
      type: nest
      value:
        - type: cond
          value:
            - "if score -cooked hurm-fish matches 1.."
            - "if score -cooked hurm-fish matches 2.."
            - "if score -cooked hurm-fish matches 3.."
            - "if score -cooked hurm-fish matches 4.."
          count: 4
        - type: cond
          value:
            -  "if entity @a[x=1072,y=125,z=352,dx=6,dz=7,dy=2]"
          weight: 1
    end:
      - execute if score -caught hurm-fish-caught matches 4.. run data modify storage hitchhike:story/hurm fish_message set value "Nice job on the fish, though. Maybe a little charred but otherwise quite delectable."
      - execute unless score -caught hurm-fish-caught matches 4.. run data modify storage hitchhike:story/hurm fish_message set value "What an amazingly cooked fish though; if I didn't know better I would think you got it straight from a restaurant. It's amazing what you managed to make with no spices or anything."
      - scoreboard players set @e[tag=npc-hurm] dialogue-status 3

itemphysics:
  # - duration: 20 # physics simulation duration in seconds
  #   count: 300 # number of items
  #   item: glass_pane
  #   corner: 0 64.5 0
  #   # slope: -45 0 0
  #   bounds: 3 3 # bounds of simulation
  #   small: true
  #   type: head
  #   walls: false
  #   ground:
  #     - 0 0 0 0 0 0
  #     - 1 1 1 1 1 1
  #     - 2 2 2 2 2 2
  #     - 3 3 3 3 3 3
  #     - 4 4 4 4 4 4
  #     - 5 5 5 5 5 5
  groceryMelons:
    duration: 40 # physics simulation duration in seconds
    count: 30 # number of items
    item: melon_slice
    corner: 907.5 65 -152.5
    bounds: 4 2 # bounds of simulation
    small: true
    type: head
    walls: false
    ground:
      - 99 0 0 0 0 0 0 99
      - 99 1 1 1 1 1 1 99
      - 99 2 2 2 2 2 2 99
      - 99 99 99 99 99 99 99 99
    spawnrange: 0.5 0.5 0.5 0.5 #Relative northwest corner to northwest, relative southeast corner to southeast (positive is inset),
    rotation: 0 0 180
  groceryApples:
    duration: 40 # physics simulation duration in seconds
    count: 30 # number of items
    item: apple
    corner: 903.5 65 -152.5
    bounds: 4 2 # bounds of simulation
    small: true
    type: head
    walls: false
    ground:
      - 99 0 0 0 0 0 0 99
      - 99 1 1 1 1 1 1 99
      - 99 2 2 2 2 2 2 99
      - 99 99 99 99 99 99 99 99
    spawnrange: 0.5 0.5 0.5 0.5 #Relative northwest corner to northwest, relative southeast corner to southeast (positive is inset)
    rotation: 0 0 180
  groceryGlowBerries:
    duration: 40 # physics simulation duration in seconds
    count: 30 # number of items
    item: glow_berries
    corner: 899.5 65 -152.5
    bounds: 4 2 # bounds of simulation
    small: true
    type: head
    walls: false
    ground:
      - 99 0 0 0 0 0 0 99
      - 99 1 1 1 1 1 1 99
      - 99 2 2 2 2 2 2 99
      - 99 99 99 99 99 99 99 99
    spawnrange: 0.5 0.5 0.5 0.5 #Relative northwest corner to northwest, relative southeast corner to southeast (positive is inset)
    rotation: 0 0 180
  steakbottom1:
    duration: 30
    count: 30
    corner: 916 65 -168
    item: beef
    bounds: 1 4.5
    small: true
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 99 99
    spawnrange: 0 0.5 0.5 0.5
    rotation: 0 0 -90
  muttonmid1:
    duration: 30
    count: 30
    corner: 916 66 -168
    item: mutton
    bounds: 1 4.5
    small: false
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 99 99
    spawnrange: 0 0.5 0.5 0.5
    rotation: 0 0 -90
  porkbottom1:
    duration: 30
    count: 30
    corner: 913 65 -168
    item: porkchop
    bounds: 3 1
    small: false
    type: head
    walls: false
    ground:
      - 99 99 99 99 99 99
      - 0 0 0 0 0 0
    spawnrange: 0 0.5 0 0
    rotation: 0 0 0
  rabbitmiddle1:
    duration: 30
    count: 50
    corner: 913 66 -168
    item: rabbit
    bounds: 3 1
    small: false
    type: head
    walls: false
    ground:
      - 99 99 99 99 99 99
      - 0 0 0 0 0 0
    spawnrange: 0 0.5 0 0
    rotation: 0 0 0
  chickenbottom1:
    duration: 30
    count: 50
    corner: 909.5 65 -168
    item: chicken
    bounds: 3.5 1
    small: false
    type: head
    walls: false
    ground:
      - 99 99 99 99 99 99 99
      - 99 0 0 0 0 0 0
    spawnrange: 0 0.5 0 0
    rotation: 0 0 0
  chickenmiddle1:
    duration: 30
    count: 50
    corner: 909.5 66 -168
    item: chicken
    bounds: 3.5 1
    small: false
    type: head
    walls: false
    ground:
      - 99 99 99 99 99 99 99
      - 99 0 0 0 0 0 0
    spawnrange: 0 0.5 0 0
    rotation: 0 0 0
  # carrotbottom1:
  #   duration: 30
  #   count: 50
  #   corner: 916 64.5 -163.5
  #   item: carrot
  #   bounds: 1 2.5
  #   small: true
  #   type: head
  #   walls: false
  #   ground:
  #     - 99 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #   spawnrange: 0 0.5 0.5 0
  #   rotation: 0 0 -90
  carrotmid1:
    duration: 30
    count: 100
    corner: 916 65.5 -163.5
    item: carrot
    bounds: 1 2.5
    small: true
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0.5 0.5 0
    rotation: 0 0 -90
  # sweetberrytop1:
  #   duration: 30
  #   count: 200
  #   corner: 916 66.5 -163.5
  #   item: berries
  #   bounds: 1 5.5
  #   small: true
  #   type: head
  #   walls: false
  #   ground:
  #     - 99 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #   spawnrange: 0 0.5 0.5 0.5
  #   rotation: 0 0 -90
  potatomid1:
    duration: 30
    count: 100
    corner: 916 65.5 -161
    item: potato
    bounds: 1 3
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0 0.5 0
    rotation: 0 0 -90
  # potatobottom1:
  #   duration: 30
  #   count: 50
  #   corner: 916 64.5 -160.5
  #   item: potato
  #   bounds: 1 3
  #   small: true
  #   type: head
  #   walls: false
  #   ground:
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #     - 0 99
  #   spawnrange: 0 0 0.5 0
  #   rotation: 0 0 -90
  shroombottom1:
    duration: 30
    count: 100
    corner: 916 64.5 -157.5
    item: mysteryshrooms
    bounds: 1 2.5
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0 0.5 0
    rotation: 0 0 -90
  shroommid1:
    duration: 30
    count: 100
    corner: 916 65.5 -158
    item: shiitake
    bounds: 1 3
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0 0.5 0
    rotation: 0 0 -90
  bamboomid1:
    duration: 30
    count: 100
    corner: 916 64.5 -155
    item: bamboo
    bounds: 1 4
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 99 99
    spawnrange: 0 0 0.5 0.5
    rotation: 0 0 -90
  kelpmid1:
    duration: 30
    count: 100
    corner: 916 65.5 -155
    item: kelp
    bounds: 1 4
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 99 99
    spawnrange: 0 0 0.5 0.5
    rotation: 0 0 -90
  beetroottop1:
    duration: 30
    count: 300
    corner: 916 66.5 -158
    item: beetroot
    bounds: 1 3
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0.5 0.5 0.5
    rotation: 0 0 -90
  sugarcanetop1:
    duration: 30
    count: 200
    corner: 916 66.5 -155
    item: cane
    bounds: 1 4
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 99 99
    spawnrange: 0 0.5 0.5 0.5
    rotation: 0 0 -90
  pickletop1:
    duration: 30
    count: 100
    corner: 912.5 66.5 -152
    item: pickle
    bounds: 3.5 1
    small: true
    type: head
    walls: false
    ground:
      - 99 0 0 0 0 0 0
      - 99 99 99 99 99 99 99
    spawnrange: 0.5 0 0 0.5
    rotation: 0 0 180
  milkbottom1:
    duration: 30
    count: 100
    corner: 912.5 64.5 -152
    item: milk_bucket
    bounds: 3.5 1
    small: false
    type: head
    walls: false
    ground:
      - 99 0 0 0 0 0 0
      - 99 99 99 99 99 99 99
    spawnrange: 0.5 0 0 0.5
    rotation: 0 0 180
  # eggmiddle1:
  #   duration: 30
  #   count: 100
  #   corner: 912.5 65.5 -152
  #   item: egg
  #   bounds: 3.5 1
  #   small: true
  #   type: head
  #   walls: false
  #   ground:
  #     - 99 0 0 0 0 0 0
  #     - 99 99 99 99 99 99 99
  #   spawnrange: 0.5 0 0 0.5
  #   rotation: 0 0 180
  salmon1:
    duration: 40
    count: 30
    corner: 895.5 65.5 -168.5
    item: salmon
    bounds: 5 1.5
    small: false
    type: head
    walls: false
    ground:
      - 99 99 99 99 99 99 99 99 99 99
      # - 99  2  2  2  2  2  2  2  2  2
      - 99  1  1  1  1  1  1  1  1  1
      - 99  0  0  0  0  0  0  0  0  0
      # - 99 99 99 99 99 99 99 99 99 99
    spawnrange: 0.5 0.5 0 0
    rotation: 0 0 0
  tropicalfish1:
    duration: 40
    count: 30
    corner: 900.5 65.5 -168.5
    item: tropical_fish
    bounds: 4.5 1.5
    small: false
    type: head
    walls: false
    ground:
      - 99 99 99 99 99 99 99 99 99
      -  1  1  1  1  1  1  1  1  1
      -  0  0  0  0  0  0  0  0  0
    spawnrange: 0 0.5 0 0
    rotation: 0 0 0
  pufferfish1:
    duration: 40
    count: 30
    corner: 905 65.5 -168.5
    item: pufferfish
    bounds: 4.5 1.5
    small: false
    type: head
    walls: false
    ground:
      - 99 99 99 99 99 99 99 99 99
      -  1  1  1  1  1  1  1  1 99
      -  0  0  0  0  0  0  0  0 99
    spawnrange: 0 0.5 0.5 0
    rotation: 0 0 0
  monster:
    duration: 40
    count: 50
    corner: 900 64.5 -162.5
    item: monster
    bounds: 1.5 3
    small: false
    type: head
    walls: false
    ground:
      - 99 99 99
      - 0 0 99
      - 0 0 99
      - 0 0 99
      - 0 0 99
      - 0 0 99
    spawnrange: 0 0.5 0.5 0
    rotation: 0 0 -90
  lacroix:
    duration: 30
    count: 100
    corner: 900.5 66 -162.5
    item: lacroix
    bounds: 1 3
    small: false
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0.5 0.5 0
    rotation: 0 0 -90

shelves:
  sweetberrytop:
    pos: 916 66 -163
    dir: south
    length: 5
    count: 12
    vari: 0.1
    item: berries
    small: true
  eggmid:
    pos: 913 65 -152
    dir: east
    length: 3.5
    count: 6
    vari: 0.2
    item: egg
    small: false
  carrotbottom:
    pos: 916 64 -163
    dir: south
    length: 2.5
    count: 6
    vari: 0.1
    item: carrot
    small: true
  potatobottom:
    pos: 916 64 -160.5
    dir: south
    length: 3
    count: 8
    vari: 0.1
    item: potato
    small: true
  cookiebottom:
    pos: 910 64 -162
    dir: south
    length: 2.5
    count: 6
    item: cookie
    small: true
  cookiemid:
    pos: 910 65 -162
    dir: south
    length: 2.5
    count: 6
    item: cookie
    small: true
  cookietop:
    pos: 910 66 -162
    dir: south
    length: 2.5
    count: 6
    item: cookie
    small: true
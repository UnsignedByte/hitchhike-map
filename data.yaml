

npc:
  params:
    # how accurate the line checking facing npc is
    facing_res: 4
  npcs:
    billy:
      name: Billy
      colour: 0xff00ff
      position: -3 64 18
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNDE1NWQyMWM3NzNjNzY1MmJlOTg0YmQ3NTNkZDhiM2QyMjVkOWE5NTBkMWQyM2ViZjBmYzVjOWVkYzM4NDBjYiJ9fX0=
      villager:
        type: jungle
        profession: fletcher
      dialogue:
        - messages:
          - Once upon a time, I stumbled across a hole.
          - Honestly, I have no idea how I didn't fall in.

    sam:
      name: Sam
      colour: 0xffff00
      position: 3 64 18
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvODBiYzk0YTIzOThlOTliNDRkMjUyMDg4Y2EyMzU2M2Y3OTlhZTUzZDdlZWVlOTRmNzFlM2NiODVkMjViOTc4MiJ9fX0=
      villager:
        type: swamp
        profession: shepherd
      dialogue:
        - messages:
          - Well, this is a bit unfortunate.
          - Please leave.
          end: 1

    marc:
      name: Marc
      colour: 0x00ff00
      position: 0 64 18
      rotation: 180 0
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYmExYjA2Njk3NDIwMmViMGY2ZTM0MmFhYmI3ZTBkNzM0ZGNhMDlhOWY2ZjJiMzhmMjIyNmE3OTEwZmIzNzZlOSJ9fX0
      villager:
        type: taiga
        profession: mason
      dialogue:
        - messages:
          - I have nothing to say to you.
          - message:
              - text: "GOODBYE, "
                color: red
                bold: true
              - selector: select.player
                color: dark_red
                bold: true
                italic: true
            global: true
          end: 1
        - messages:
          - Please stop.
          - I will call the police.
          cond: 1
          end: 0
    wheatish:
      name: Mr. Wheat
      colour: 0xc7a946
      position: 6 64 18
      rotation: 180 0
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvYzBkNDE1ZDJlYjlkNjhlNTZkYjUwYWZmNDk0YWJkZWRiODViOTExOTE4OWNmMDFkZDRmOTFjNmRhYjJjNmJhIn19fQ==
      villager:
        type: desert
        profession: none
      dialogue:
        - messages:
          - Hey! It sure is a LOAF-ly day today, isn't it?
          - A fine day for some bread... though isn't that every day?
          - Anyways, you should get on with your daily whole wheat goodness!
          - message: 
              - text: "I've heard the bread at safeway is mighty tasty, "
              - text: go try some
                color: light_purple
                italic: true
              - text: '!'
            command:
              - type: quest
                value: bread
            global: true
          end: 1
        - messages:
          - You still haven't had the bread?
          - I told you, its really good!
          - Just go try it, I'm sure you'll like it.
          cond: 1
        - messages:
          - I see you enjoyed the bread.
          - I told you it was good!
          - Anyways, see you later! I've gotta go get some for myself.
          cond: 2
    sawyer:
      name: Chris Sawyer
      colour: 0x4FA1A7
      position: 950.5 70.0 -0.25
      rotation: 0 0
      head: eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvNWFkMTNmN2Q4ZTVhMTBmNGZiYThiODk3NTVlZGVkNzBmYzk2MTE5YTRlOThkZjc3M2M4NmQzMmNmN2E3ZjNlZiJ9fX0=
      villager:
        type: savanna
        profession: cleric
      dialogue:
        - messages:
          - You really just broke right in, didn't you?
          - Anyways, what's up?
          - Hmm, the internet is down...
          - That might have something to do with the sudden loss of electricity in my house, or the massive thunderstorm going on outside... who knows?
          - I would recommend you turn it off and on again... your internet, I mean. Not my electricity.
          - Let me know how that goes!
          end: 1
        - messages:
            - How'd the internet fixing go? Not great, it seems.
            - Unfortunately I am unable to fix the power grid through my computer.
            - message:
              - text: "If you "
              - text: require
                italic: true
              - text: " internet so desperately, maybe you could find somewhere unaffected by the power outage?"
            - message: 
              - text: "I "
              - text: have
                italic: true
              - text: " heard there was a cell tower up on the mountain with its own generator, though that could just be a myth."
          cond: 1
          end: 2
        - messages:
          - Hmm, I'm not sure what else I could do to help.
          - The mountain is the unmistakeable mass toward the south, if you can't find it.
          - Sorry, I'm a bit busy learning x86_64, so I'm afraid I can't go there with you.
          - I wouldn't mind if you topped something other than the mountain though...
          - Anyways, see you later!
          cond: 2
          end: -1
    apple_sale:
      name: "Glow Berry (${toCost(item.store.unsold.berry.tag.cost)})"
      invisible: true
      colour: 0xfad352
      position: 901.5 64 -152.5
      dialogue:
        - messages:
          - message: taken
            silent: true
            command:
              - "give ${select.player} ${toGive(item.store.unsold.berry)}"
    berry_sale:
      name: "Apple (${toCost(item.store.unsold.apple.tag.cost)})"
      invisible: true
      colour: 0xFF0000
      position: 905.5 64 -152.5
      dialogue:
        - messages:
          - message: taken
            silent: true
            command:
              - "give ${select.player} ${toGive(item.store.unsold.apple)}"
    melon_sale:
      name: "Watermelon (${toCost(item.store.unsold.melon.tag.cost)})"
      invisible: true
      colour: 0xFF5733
      position: 909.5 64 -152.5
      dialogue:
        - messages:
          - message: taken
            silent: true
            command:
              - "give ${select.player} ${toGive(item.store.unsold.melon)}"
    cashier:
      name: Henry
      position: 891.5 64 -152.5
      colour: 0xeb7060
      dialogue:
        - messages:
          - "Hi, welcome to Safeway!"
          - "If you want to buy anything, just drop it off here on the conveyor."
        - messages:
          - message:
            - nbt: welcome_message
              storage: hitchhike:safeway
              interpret: true
            command:
              - type: function
                value: "hitchhike:safeway/pay"
          - message:
            - nbt: success_msg
              storage: hitchhike:safeway
              interpret: true
          cond: 5
              
quest:
  visitfriend: # visit friend's house
    name: Phone-A-Friend
    hint: The internet seems to have gone down, but you don't know why. Luckily, you happen to know a programmer friend, maybe pay him a visit?
    description: Unlawfully break and enter into your friend's house.
    condition:
      type: player
      all: true
      condition:
        - if entity @a[x=947,y=70,z=-3,dz=4,dx=6,dy=3]
      count: 1
  bread:
    name: Whole Wheat
    hint: Maintain a wheat-based diet (whole). # description to show before the quest is done (optional)
    description: Eat ${condition.count} pieces of bread.
    condition:
      type: player # this type stores data for every player
      stat: minecraft.used:minecraft.bread
      count: 5
    end:
      - type: score
        value: ${npc.wheatish} dialogue-status 2
  diet:
    name: Balanced Diet
    description: Eat ${condition.value[1].count} pieces of meat (cooked, of course) and ${condition.value[0].count} vegetables
    condition:
      type: nest # listed values are also condition objects
      value:
        - type: nest # q-1-0
          value:
            - type: player
              stat: minecraft.used:minecraft.carrot #q-1-0-0
              count: 1
              overflow: true # this quest can be completed to over 100% completion
            - type: player
              stat: minecraft.used:minecraft.potato #q-1-0-1
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.beetroot #q-1-0-2
              count: 1
              overflow: true
          count: 5 # sum of child completeions must total 5% (5 pieces of food)
        - type: nest #q-1-1
          value:
            - type: player
              stat: minecraft.used:minecraft.cooked_beef
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.cooked_porkchop
              count: 1
              overflow: true
            - type: player
              stat: minecraft.used:minecraft.cooked_chicken
              count: 1
              overflow: true
          count: 5
  leather:
    name: Dressing Warm
    description: Wear 3 pieces of leather armor.
    hint: Make sure to dress warm!
    condition:
      type: nest
      value:
        - type: player
          all: true
          condition: # each condition in the list, when satisfied, will increment the score by 1. think of each condition as in `execute as @a at @s <conditions> run`
            - if entity @s[nbt={Inventory:[{Slot:100b, id:"minecraft:leather_boots"}]}]
            - if entity @s[nbt={Inventory:[{Slot:101b, id:"minecraft:leather_leggings"}]}]
            - if entity @s[nbt={Inventory:[{Slot:102b, id:"minecraft:leather_chestplate"}]}]
            - if entity @s[nbt={Inventory:[{Slot:103b, id:"minecraft:leather_helmet"}]}]
          count: 3

itemphysics:
  # - duration: 20 # physics simulation duration in seconds
  #   count: 300 # number of items
  #   item: glass_pane
  #   corner: 0 64.5 0
  #   # slope: -45 0 0
  #   bounds: 3 3 # bounds of simulation
  #   small: true
  #   type: head
  #   walls: false
  #   ground:
  #     - 0 0 0 0 0 0
  #     - 1 1 1 1 1 1
  #     - 2 2 2 2 2 2
  #     - 3 3 3 3 3 3
  #     - 4 4 4 4 4 4
  #     - 5 5 5 5 5 5
  groceryMelons:
    duration: 40 # physics simulation duration in seconds
    count: 100 # number of items
    item: melon_slice
    corner: 907.5 65 -152.5
    bounds: 4 2 # bounds of simulation
    small: true
    type: head
    walls: false
    ground:
      - 99 0 0 0 0 0 0 99
      - 99 1 1 1 1 1 1 99
      - 99 2 2 2 2 2 2 99
      - 99 99 99 99 99 99 99 99
    spawnrange: 0.5 0.5 0.5 0.5 #Relative northwest corner to northwest, relative southeast corner to southeast (positive is inset),
    rotation: 0 0 -90
  groceryApples:
    duration: 40 # physics simulation duration in seconds
    count: 100 # number of items
    item: apple
    corner: 903.5 65 -152.5
    bounds: 4 2 # bounds of simulation
    small: true
    type: head
    walls: false
    ground:
      - 99 0 0 0 0 0 0 99
      - 99 1 1 1 1 1 1 99
      - 99 2 2 2 2 2 2 99
      - 99 99 99 99 99 99 99 99
    spawnrange: 0.5 0.5 0.5 0.5 #Relative northwest corner to northwest, relative southeast corner to southeast (positive is inset)
    rotation: 0 0 180
  groceryGlowBerries:
    duration: 40 # physics simulation duration in seconds
    count: 100 # number of items
    item: glow_berries
    corner: 899.5 65 -152.5
    bounds: 4 2 # bounds of simulation
    small: true
    type: head
    walls: false
    ground:
      - 99 0 0 0 0 0 0 99
      - 99 1 1 1 1 1 1 99
      - 99 2 2 2 2 2 2 99
      - 99 99 99 99 99 99 99 99
    spawnrange: 0.5 0.5 0.5 0.5 #Relative northwest corner to northwest, relative southeast corner to southeast (positive is inset)
    rotation: 0 0 180
  eggbottom1:
    duration: 30
    count: 300
    corner: 916 65 -168
    item: egg
    bounds: 1 4.5
    small: true
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 99 99
    spawnrange: 0 0.5 0.5 0.5
    rotation: 0 0 -90
  milktop1:
    duration: 30
    count: 200
    corner: 916 66 -168
    item: milk_bucket
    bounds: 1 4.5
    small: false
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 99 99
    spawnrange: 0 0.5 0.5 0.5
    rotation: 0 0 -90
  carrotbottom1:
    duration: 30
    count: 200
    corner: 916 64.5 -163.5
    item: carrot
    bounds: 1 2.5
    small: true
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0.5 0.5 0
    rotation: 0 0 -90
  carrotmid1:
    duration: 30
    count: 100
    corner: 916 65.5 -163.5
    item: carrot
    bounds: 1 2.5
    small: true
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0.5 0.5 0
    rotation: 0 0 -90
  sweetberrytop1:
    duration: 30
    count: 300
    corner: 916 66.5 -163.5
    item: sweet_berries
    bounds: 1 5.5
    small: true
    type: head
    walls: false
    ground:
      - 99 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0.5 0.5 0.5
    rotation: 0 0 -90
  potatomid1:
    duration: 30
    count: 200
    corner: 916 65.5 -161
    item: potato
    bounds: 1 3
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0 0.5 0
    rotation: 0 0 -90
  potatobottom1:
    duration: 30
    count: 200
    corner: 916 64.5 -160.5
    item: potato
    bounds: 1 3
    small: true
    type: head
    walls: false
    ground:
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
      - 0 99
    spawnrange: 0 0 0.5 0
    rotation: 0 0 -90